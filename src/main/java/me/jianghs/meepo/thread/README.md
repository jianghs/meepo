# 线程

## 线程状态
1. 创建-new

   创建后，运行的条件（比如内存资源）满足后才会进入就绪状态。

1. 就绪-runnable

   就绪后，只有得到CPU的执行事件后才会执行。
   * 调用start方法
   * 当前线程sleep方法结束、其他线程join方法结束、某个线程拿到对象锁
   * 当前时间片用完调用yield方法
   * 锁池里的线程拿到对象锁
   

1. 运行-running

   有很多原因导致线程无法运行下去：
   * 用户主动让线程睡眠一定时间后再执行 time waiting
   * 用户主动让线程等待 waiting
   * 被同步块阻塞 blocked

1. 阻塞-blocked

1. 等待-waiting

   处于等待状态的线程不会获得CPU时间，需要被主动唤醒，否则处于无限期等待。

1. 超时等待-time waiting

   处于等待状态的线程不会获得CPU时间，无需无限期等待被其他线程唤醒，到达一定时间后会自动唤醒。

1. 消亡/dead
 
   异常中断或者执行完毕会进入消亡状态
   
## Thread类方法

1. start()

   用于启动线程。

1. run()

   线程启动后，每个线程具体执行的任务。

1. sleep()

   线程睡眠某段时间，退出CPU时间片。
   * Thread类的静态方法
   * 不会释放锁
   * 暂停线程,进入阻塞状态
   
1. yield()
   * Thread类的静态方法
   * 不会释放锁
   * 暂停线程,进入就绪状态
   * 只有优先级与当前线程相同或者比当前线程高的线程才能获得执行机会
   
1. join()
   
   一个线程等待加入的线程执行完毕或者一定时间
   * 线程进入阻塞状态
   * 释放占有的锁,并交出CPU执行权限
   * 本质是调用的Object.wait()